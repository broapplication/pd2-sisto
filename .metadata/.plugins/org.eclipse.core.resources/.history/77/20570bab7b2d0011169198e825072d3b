<?xml version="1.0" encoding="UTF-8"?>
<xs:schema version="1.0" targetNamespace="http://pad.polito.it/WorkflowRestricted"
	xmlns:tns="http://pad.polito.it/WorkflowRestricted" xmlns:xs="http://www.w3.org/2001/XMLSchema">
	<xs:element name="getWorkflowNames" type="tns:getWorkflowNames" />
	<xs:element name="getWorkflowNamesResponse" type="tns:getWorkflowNamesResponse">
		<xs:key name="workflowKey">
			<xs:selector xpath="name" />
			<xs:field xpath="name" />
		</xs:key>
	</xs:element>
	<xs:element name="GenericFault" type="tns:genericFault" />

	<xs:element name="getWorkflows" type="tns:getWorkflows" />
	<xs:element name="getWorkflowsResponse" type="tns:getWorkflowsResponse" />
	<xs:element name="UnknownNames" type="tns:UnknownNames" />
	<xs:element name="getProcesses" type="tns:getProcesses" />
	<xs:element name="getProcessesResponse" type="tns:getProcessesResponse" />
	<xs:element name="UnknownCodes" type="tns:UnknownCodes" />

	<xs:complexType name="genericFault">
		<xs:sequence>
			<xs:element name="errno" type="xs:int"></xs:element>
			<xs:element name="message" type="xs:string" minOccurs="0"></xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="getWorkflows">
		<xs:sequence>
			<xs:element name="wfname" type="tns:Name" minOccurs="0"
				maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="getWorkflowsResponse">
		<xs:sequence>
			<xs:element name="workflow" type="tns:workflow" minOccurs="0"
				maxOccurs="unbounded">
				<xs:key name="actionKey">
					<xs:selector xpath="action" />
					<xs:field xpath="name" />
				</xs:key>
				<xs:keyref name="nextActionKeyRef" refer="tns:actionKey">
					<xs:selector xpath="action" />
					<xs:field xpath="nextAction" />
				</xs:keyref>
			</xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="workflow">
		<xs:sequence>
			<xs:element name="name" type="tns:Name" />
			<xs:element name="action" type="tns:action" nillable="true"
				minOccurs="0" maxOccurs="unbounded" />
			<xs:element name="processSummary" type="tns:processSummary" minOccurs="0"
				maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="action">
		<xs:sequence>
			<xs:element name="name" type="tns:Name" />
			<xs:element name="automaticallyInstantiated" type="xs:boolean" />
			<xs:element name="role" type="tns:Role" />
			<xs:choice>
				<xs:element name="nextAction" type="tns:Name" nillable="true"
					minOccurs="0" maxOccurs="unbounded" />
				<xs:element name="workflow" type="tns:Name" minOccurs="0" />
			</xs:choice>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="UnknownNames">
		<xs:sequence>
			<xs:element name="message" type="xs:string" minOccurs="0" />
			<xs:element name="names" type="tns:Name" maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="getWorkflowNames">
		<xs:sequence />
	</xs:complexType>

	<xs:complexType name="getWorkflowNamesResponse">
		<xs:sequence>
			<xs:element name="name" type="tns:Name" minOccurs="0"
				maxOccurs="unbounded" />
		</xs:sequence>
	</xs:complexType>

	<xs:simpleType name="Name">
		<xs:restriction base="xs:string">
			<xs:pattern value="[a-zA-Z][a-zA-Z0-9]*" />
		</xs:restriction>
	</xs:simpleType>

	<xs:simpleType name="Code">
		<xs:restriction base="xs:string">
			<xs:pattern value="[a-zA-Z0-9]*" />
		</xs:restriction>
	</xs:simpleType>

	<xs:simpleType name="Role">
		<xs:restriction base="xs:string">
			<xs:pattern value="[a-zA-Z ]*" />
		</xs:restriction>
	</xs:simpleType>

		
	<xs:complexType name="getProcessSummaries">
		<xs:sequence>
			<xs:element name="wfname" type="tns:Name" minOccurs="0"
				maxOccurs="unbounded"></xs:element>
		</xs:sequence>
	</xs:complexType>
	
	<xs:complexType name="getProcessSummariesResponse">
		<xs:sequence>
			<xs:element name="processSummary" type="tns:processSummary" minOccurs="0"
				maxOccurs="unbounded"></xs:element>
		</xs:sequence>
	</xs:complexType>
	

	<xs:complexType name="getProcesses">
		<xs:sequence>
			<xs:element name="code" type="tns:Code" minOccurs="0"
				maxOccurs="unbounded"></xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="getProcessesResponse">
		<xs:sequence>
			<xs:element name="process" type="tns:process" minOccurs="0"
				maxOccurs="unbounded"></xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="process">
		<xs:sequence>
			<xs:element name="code" type="tns:Code"></xs:element>
			<xs:element name="startTime" type="xs:dateTime"></xs:element>
			<xs:element name="actionStatus" type="tns:actionStatusType"
				minOccurs="0" maxOccurs="unbounded">
			</xs:element>
		</xs:sequence>
	</xs:complexType>
	
	<xs:complexType name="processSummary">
		<xs:sequence>
			<xs:element name="code" type="tns:Code"></xs:element>
			<xs:element name="startTime" type="xs:dateTime"></xs:element>
			<xs:element name="availableActions" type="xs:integer" />
			<xs:element name="activeActions" type="xs:integer" />
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="UnknownCodes">
		<xs:sequence>
			<xs:element name="message" type="xs:string" minOccurs="0"
				maxOccurs="1">
			</xs:element>
			<xs:element name="codes" type="tns:Code" minOccurs="0"
				maxOccurs="unbounded"></xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="actionStatusType">
		<xs:sequence>
			<xs:element name="action" type="tns:Name"></xs:element>
			<xs:element name="terminationTime" type="xs:dateTime">
			</xs:element>
			<xs:element name="actor" type="tns:actor"></xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="actor">
		<xs:sequence>
			<xs:element name="name" type="tns:ActorName"></xs:element>
			<xs:element name="role" type="tns:Role"></xs:element>
		</xs:sequence>
	</xs:complexType>

	<xs:simpleType name="ActorName">
		<xs:restriction base="xs:string">
			<xs:pattern value="[a-zA-Z]|[a-zA-Z][a-zA-Z ]*[a-zA-Z]">
			</xs:pattern>
		</xs:restriction>
	</xs:simpleType>

	<xs:element name="takeInCharge" type="tns:takeInCharge">
	</xs:element>
	<xs:element name="takeInChargeResponse" type="tns:takeInChargeResponse">
	</xs:element>
	<xs:complexType name="takeInCharge">
		<xs:sequence>
			<xs:element name="code" type="tns:Code" />
			<xs:element name="action" type="tns:Name" />
			<xs:element name="actor" type="tns:actor" />
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="takeInChargeResponse">
		<xs:sequence>
			<xs:element name="status" type="tns:actionStatusType"></xs:element>
		</xs:sequence>
	</xs:complexType>
	<xs:element name="UnknownCode" type="tns:genericFault">
	</xs:element>


	<xs:element name="ActionFault" type="tns:genericFault"></xs:element>
	<xs:element name="DifferentRole" type="tns:DifferentRole"></xs:element>

	<xs:complexType name="DifferentRole">
		<xs:sequence>
			<xs:element name="expected" type="xs:string"></xs:element>
			<xs:element name="received" type="xs:string"></xs:element>
		</xs:sequence>
	</xs:complexType>
	<xs:element name="terminateAction" type="tns:terminateAction">
	</xs:element>
	<xs:element name="terminateActionResponse">
		<xs:complexType>
			<xs:sequence>
				<xs:element name="out" type="xs:string"></xs:element>
			</xs:sequence>
		</xs:complexType>
	</xs:element>

	<xs:complexType name="terminateAction"></xs:complexType>


    <xs:element name="getProcessSummaries" type="tns:getProcessSummaries"></xs:element>

    <xs:element name="getProcessSummariesResponse" type="tns:getProcessSummariesResponse"></xs:element>


    <xs:complexType name="getAvailableActions">
    	<xs:sequence>
    		<xs:element name="code" type="tns:Code"></xs:element>
    		<xs:element name="role" type="tns:Role" minOccurs="0" maxOccurs="unbounded"></xs:element>
    	</xs:sequence>
    </xs:complexType>

    <xs:element name="getAvailableActions" type="tns:getAvailableActions"></xs:element>

    <xs:complexType name="getActiveActions">
    	<xs:sequence>
    		<xs:element name="code" type="tns:Code"></xs:element>
    		<xs:choice>
    			<xs:element name="role" type="tns:Role" minOccurs="0" maxOccurs="unbounded"></xs:element>
    			<xs:element name="actor" type="tns:actor" minOccurs="0" maxOccurs="unbounded"></xs:element>
    		</xs:choice>
    	</xs:sequence>
    </xs:complexType>

    <xs:element name="getActiveActions" type="tns:getActiveActions"></xs:element>
</xs:schema>